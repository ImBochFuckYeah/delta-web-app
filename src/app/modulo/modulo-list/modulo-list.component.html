<div class="container mt-4">
	<h2>Gestión de Módulos</h2>

	<div class="row mb-3">
		<div class="col-md-6">
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Buscar módulo por nombre..." [(ngModel)]="searchTerm"
					(keyup.enter)="onSearch()">
				<button class="btn btn-primary" (click)="onSearch()" [disabled]="loading">
					<span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
					Buscar
				</button>
			</div>
		</div>
		<div class="col-md-6 text-end">
			<button class="btn btn-success" routerLink="/app/modulos/crear">
				<i class="bi bi-plus-circle"></i> Nuevo Módulo
			</button>
		</div>
	</div>

	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>ID</th>
					<th>Nombre</th>
					<th>Orden Menú</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let modulo of modulos">
					<td>{{ modulo.IdModulo }}</td>
					<td>{{ modulo.Nombre }}</td>
					<td>{{ modulo.OrdenMenu }}</td>
					<td>
						<button class="btn btn-sm btn-primary me-2" (click)="editarModulo(modulo.IdModulo!)">
							Editar
						</button>
						<button class="btn btn-sm btn-danger" (click)="eliminarModulo(modulo.IdModulo!)">
							Eliminar
						</button>
					</td>
				</tr>
				<tr *ngIf="modulos.length === 0 && !loading">
					<td colspan="4" class="text-center">No se encontraron módulos</td>
				</tr>
			</tbody>
		</table>
	</div>

	<nav *ngIf="totalPages > 1">
		<ul class="pagination justify-content-center">
			<li class="page-item" [class.disabled]="currentPage === 1">
				<a class="page-link" (click)="onPageChange(currentPage - 1)">Anterior</a>
			</li>
			<li class="page-item" *ngFor="let page of pages" [class.active]="page === currentPage">
				<a class="page-link" (click)="onPageChange(page)">{{ page }}</a>
			</li>
			<li class="page-item" [class.disabled]="currentPage === totalPages">
				<a class="page-link" (click)="onPageChange(currentPage + 1)">Siguiente</a>
			</li>
		</ul>
	</nav>

	<div *ngIf="loading" class="text-center mt-3">
		<div class="spinner-border text-primary">
			<span class="visually-hidden">Cargando...</span>
		</div>
	</div>
</div>
