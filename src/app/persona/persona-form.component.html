<div class="container-fluid mt-4">
  <h2>{{ isEdit ? 'Editar Persona' : 'Nueva Persona' }}</h2>

  <form #form="ngForm" (ngSubmit)="save()" novalidate>
    <div class="row">

      <!-- Nombre -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Nombre *</label>
        <input class="form-control" [(ngModel)]="model.Nombre" name="Nombre" required />
        <div *ngIf="form.submitted && !model.Nombre" class="text-danger small mt-1">Campo obligatorio.</div>
      </div>

      <!-- Apellido -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Apellido *</label>
        <input class="form-control" [(ngModel)]="model.Apellido" name="Apellido" required />
        <div *ngIf="form.submitted && !model.Apellido" class="text-danger small mt-1">Campo obligatorio.</div>
      </div>

      <!-- Correo -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Correo</label>
        <input type="email" class="form-control" [(ngModel)]="model.CorreoElectronico" name="CorreoElectronico" />
      </div>

      <!-- Teléfono -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Teléfono</label>
        <input class="form-control" [(ngModel)]="model.Telefono" name="Telefono" />
      </div>

      <!-- Dirección -->
      <div class="col-12 mb-3">
        <label class="form-label">Dirección</label>
        <input class="form-control" [(ngModel)]="model.Direccion" name="Direccion" />
      </div>

      <!-- Fecha de Nacimiento -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Fecha de Nacimiento</label>
        <input type="date" class="form-control" [(ngModel)]="model.FechaNacimiento" name="FechaNacimiento" />
      </div>

      <!-- Género -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Género *</label>
        <select class="form-select" [(ngModel)]="model.IdGenero" name="IdGenero" required>
          <option [ngValue]="null">Seleccione...</option>
          <option *ngFor="let g of generos" [ngValue]="g.IdGenero">{{ g.Nombre }}</option>
        </select>
      </div>

      <!-- Estado Civil -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Estado Civil *</label>
        <select class="form-select" [(ngModel)]="model.IdEstadoCivil" name="IdEstadoCivil" required>
          <option [ngValue]="null">Seleccione...</option>
          <option *ngFor="let e of estadosCiviles" [ngValue]="e.IdEstadoCivil">{{ e.Nombre }}</option>
        </select>
      </div>

      <!-- Documentos -->
      <div class="col-12 mb-3">


        <div class="row align-items-center mb-2" *ngFor="let doc of documentos; let i = index">
          <div class="col-md-5">
            <select class="form-select" [(ngModel)]="doc.IdTipoDocumento" name="tipoDoc{{i}}" required>
              <option [ngValue]="null">Seleccione tipo...</option>
              <option *ngFor="let tipo of tiposDocumento" [ngValue]="tipo.IdTipoDocumento">{{ tipo.Nombre }}</option>
            </select>
          </div>

          <div class="col-md-5">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="doc.NoDocumento"
              name="noDoc{{i}}"
              placeholder="Número de documento"
              required
            />
          </div>

          <div class="col-md-2 text-center">
            <button type="button" class="btn btn-outline-danger btn-sm" (click)="eliminarDocumento(i)">X</button>
          </div>
        </div>

        <button type="button" class="btn btn-outline-primary btn-sm mt-2" (click)="agregarDocumento()">
          + Agregar Documento
        </button>
      </div>
    </div>

    <button class="btn btn-primary" type="submit" [disabled]="loading">
      <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
      {{ loading ? 'Guardando...' : 'Guardar' }}
    </button>

    <button class="btn btn-outline-secondary ms-2" type="button" (click)="cancel()">
  Cancelar
</button>
  </form>
</div>
